<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JFC | World</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script type="text/javascript">
        function googleTranslateElementInit() { new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element'); }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <style>
        body { background-color: #020617; color: white; font-family: sans-serif; }
        .deal-card { background: linear-gradient(145deg, #0f172a, #020617); border: 1px solid rgba(59, 130, 246, 0.1); border-radius: 1.5rem; overflow: hidden; display: flex; flex-direction: column; height: 380px; }
        .img-box { height: 180px; width: 100%; position: relative; overflow: hidden; background: #1e293b; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; }
        .premium-blur { filter: blur(12px); opacity: 0.3; }
        .save-tag { position: absolute; top: 1rem; left: 1rem; background: #22c55e; color: white; font-size: 8px; font-weight: 900; padding: 3px 8px; border-radius: 4px; z-index: 10; }
        .nav-link { font-size: 10px; font-weight: 800; text-transform: uppercase; opacity: 0.5; }
    </style>
</head>
<body class="p-6">
    <div class="max-w-7xl mx-auto flex justify-end"><div id="google_translate_element"></div></div>
    <nav class="max-w-7xl mx-auto flex justify-between items-center py-4 mb-8 border-b border-white/5">
        <div class="flex items-center gap-12">
            <div class="text-3xl font-black italic tracking-tighter text-blue-500">JFC.</div>
            <div class="flex gap-8">
                <a href="index.html" class="nav-link">Home</a>
                <a href="europe.html" class="nav-link">Europe</a>
                <a href="asia.html" class="nav-link">Asia</a>
                <a href="world.html" class="nav-link opacity-100 text-blue-400">World</a>
            </div>
        </div>
        <button id="auth-btn" onclick="login()" class="text-[10px] font-bold uppercase border border-white/30 px-6 py-2 rounded-full hover:bg-white/10 transition">Login with Google</button>
    </nav>
    <div id="grid" class="max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
    <script>
        const cities = [
            {name: 'New York', save: '450', price: '390', info: 'Delta Airlines', img: 'https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=600'},
            {name: 'Los Angeles', save: '380', price: '420', info: 'KLM Direct', img: 'https://images.unsplash.com/photo-1534190760961-74e8c1c5c3da?w=600'},
            {name: 'Sydney', save: '600', price: '980', info: 'Qantas', img: 'https://images.unsplash.com/photo-1506973035872-a4ec16b8e8d9?w=600'},
            {name: 'Rio de Janeiro', save: '520', price: '640', info: 'TAP Air Portugal', img: 'https://images.unsplash.com/photo-1483729558449-99ef09a8c325?w=600'},
            {name: 'Cape Town', save: '400', price: '580', info: 'Lufthansa', img: 'https://images.unsplash.com/photo-1580619305218-8423a7ef79b4?w=600'},
            {name: 'Mexico City', save: '340', price: '495', info: 'Aeromexico', img: 'https://images.unsplash.com/photo-1512813195386-6cf811ad3542?w=600'},
            {name: 'Toronto', save: '310', price: '415', info: 'Air Canada', img: 'https://images.unsplash.com/photo-1503192851959-c6da8ac80cff?w=600'},
            {name: 'Lima', save: '480', price: '710', info: 'KLM', img: 'https://images.unsplash.com/photo-1526392060635-9d6019884377?w=600'},
            {name: 'San Francisco', save: '390', price: '450', info: 'United Airlines', img: 'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=600'},
            {name: 'Cancun', save: '280', price: '520', info: 'TUI Fly', img: 'https://images.unsplash.com/photo-1510097467424-192d713fd8b2?w=600'},
            {name: 'Buenos Aires', save: '550', price: '790', info: 'Iberia', img: 'https://images.unsplash.com/photo-1589909202802-8f4aadce1849?w=600'},
            {name: 'Miami', save: '320', price: '380', info: 'American Airlines', img: 'https://images.unsplash.com/photo-1533106497176-45ae19e68ba2?w=600'}
        ];
        const grid = document.getElementById('grid');
        cities.forEach(city => {
            grid.innerHTML += `<div class="deal-card"><div class="img-box"><span class="save-tag">SAVE €${city.save}</span><img src="${city.img}" onerror="this.src='https://images.unsplash.com/photo-1436491865332-7a61a109c0f3?w=600'"></div><div class="p-5 flex-1 flex flex-col justify-between"><div><h4 class="text-xl font-bold italic uppercase">${city.name}</h4><p class="text-[10px] text-slate-500 uppercase font-bold">${city.info}</p></div><div class="flex justify-between items-end mt-4"><div class="premium-blur price-text text-2xl font-black italic">€${city.price}</div><button onclick="handleAction('${city.name}')" class="unlock-btn bg-blue-600 text-white px-4 py-2 rounded-lg font-black text-[9px] uppercase">Unlock for €1</button></div></div></div>`;
        });
        function handleAction(cityName) { if (event.target.innerText.includes('BOOK')) { location.href = `deal-details.html?city=${cityName}`; } else { window.open('https://buy.stripe.com/test_7sY4gs9dMdPP31vfsi3oA02', '_blank'); } }
        const _supabase = supabase.createClient('https://wtyftavgeedogadlqpzr.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind0eWZ0YXZnZWVkb2dhZGxxcHpyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgxNTc2OTIsImV4cCI6MjA1MzczMzY5Mn0.qW7q-vL-YV0xU7r-XW8X-Z1X-YV0xU7r-XW8X-Z1X-YV0xU7r-XW8X-Z1X-Y');
        async function login() { await _supabase.auth.signInWithOAuth({ provider: 'google', options: { redirectTo: window.location.origin + window.location.pathname } }); }
        async function checkUser() {
            const { data: { user } } = await _supabase.auth.getUser();
            if (user) {
                document.querySelectorAll('.premium-blur').forEach(el => { el.style.filter = 'none'; el.style.opacity = '1'; });
                document.querySelectorAll('.unlock-btn').forEach(btn => { btn.innerText = 'Book Now'; btn.classList.replace('bg-blue-600', 'bg-green-600'); });
                document.getElementById('auth-btn').innerText = "HI, " + user.user_metadata.full_name.split(' ')[0].toUpperCase();
            }
        }
        checkUser();
    </script>
</body>
</html>
