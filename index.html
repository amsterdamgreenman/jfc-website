<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JFC | Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script type="text/javascript">
        function googleTranslateElementInit() { new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element'); }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <style>
        body { background-color: #020617; color: white; font-family: sans-serif; }
        .deal-card { background: linear-gradient(145deg, #0f172a, #020617); border: 1px solid rgba(59, 130, 246, 0.1); border-radius: 1.5rem; overflow: hidden; display: flex; flex-direction: column; height: 380px; }
        .img-box { height: 180px; width: 100%; position: relative; overflow: hidden; background: #1e293b; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; }
        .premium-blur { filter: blur(12px); opacity: 0.3; }
        .save-tag { position: absolute; top: 1rem; left: 1rem; background: #22c55e; color: white; font-size: 8px; font-weight: 900; padding: 3px 8px; border-radius: 4px; z-index: 10; }
        .nav-link { font-size: 10px; font-weight: 800; text-transform: uppercase; opacity: 0.5; }
    </style>
</head>
<body class="p-6">
    <div class="max-w-7xl mx-auto flex justify-end"><div id="google_translate_element"></div></div>
    <nav class="max-w-7xl mx-auto flex justify-between items-center py-4 mb-8 border-b border-white/5">
        <div class="flex items-center gap-12">
            <div class="text-3xl font-black italic tracking-tighter text-blue-500">JFC.</div>
            <div class="flex gap-8">
                <a href="index.html" class="nav-link opacity-100 text-blue-400">Home</a>
                <a href="europe.html" class="nav-link">Europe</a>
                <a href="asia.html" class="nav-link">Asia</a>
                <a href="world.html" class="nav-link">World</a>
            </div>
        </div>
        <button id="auth-btn" onclick="login()" class="text-[10px] font-bold uppercase border border-white/30 px-6 py-2 rounded-full hover:bg-white/10 transition">Login with Google</button>
    </nav>
    <div id="grid" class="max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
    <script>
        const cities = [
            {name: 'New York', save: '450', price: '390', info: 'Delta Airlines', img: 'https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=600'},
            {name: 'Tokyo', save: '320', price: '540', info: 'KLM Direct', img: 'https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=600'},
            {name: 'Madrid', save: '95', price: '90', info: 'Ryanair', img: 'https://images.unsplash.com/photo-1539037116277-4db20889f2d4?w=600'},
            {name: 'Bali', save: '410', price: '615', info: 'Qatar Airways', img: 'https://images.unsplash.com/photo-1537996194471-e657df975ab4?w=600'},
            {name: 'Paris', save: '120', price: '85', info: 'Air France', img: 'https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=600'},
            {name: 'Sydney', save: '600', price: '980', info: 'Qantas', img: 'https://images.unsplash.com/photo-1506973035872-a4ec16b8e8d9?w=600'},
            {name: 'Barcelona', save: '140', price: '55', info: 'Vueling', img: 'https://images.unsplash.com/photo-1583422409516-2895a77efded?w=600'},
            {name: 'Dubai', save: '190', price: '385', info: 'Emirates', img: 'https://images.unsplash.com/photo-1512453979798-5ea266f8880c?w=600'},
            {name: 'London', save: '110', price: '87', info: 'British Airways', img: 'https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=600'},
            {name: 'Rio de Janeiro', save: '520', price: '640', info: 'TAP Air Portugal', img: 'https://images.unsplash.com/photo-1483729558449-99ef09a8c325?w=600'},
            {name: 'Bangkok', save: '250', price: '480', info: 'Thai Airways', img: 'https://images.unsplash.com/photo-1504609770332-c60312386902?w=600'},
            {name: 'Rome', save: '135', price: '99', info: 'ITA Airways', img: 'https://images.unsplash.com/photo-1552832230-c0197dd311b5?w=600'}
        ];
        const grid = document.getElementById('grid');
        cities.forEach(city => {
            grid.innerHTML += `<div class="deal-card"><div class="img-box"><span class="save-tag">SAVE €${city.save}</span><img src="${city.img}" onerror="this.src='https://images.unsplash.com/photo-1436491865332-7a61a109c0f3?w=600'"></div><div class="p-5 flex-1 flex flex-col justify-between"><div><h4 class="text-xl font-bold italic uppercase">${city.name}</h4><p class="text-[10px] text-slate-500 uppercase font-bold">${city.info}</p></div><div class="flex justify-between items-end mt-4"><div class="premium-blur price-text text-2xl font-black italic">€${city.price}</div><button onclick="handleAction('${city.name}')" class="unlock-btn bg-blue-600 text-white px-4 py-2 rounded-lg font-black text-[9px] uppercase">Unlock for €1</button></div></div></div>`;
        });
        function handleAction(cityName) { if (event.target.innerText.includes('BOOK')) { location.href = `deal-details.html?city=${cityName}`; } else { window.open('https://buy.stripe.com/test_7sY4gs9dMdPP31vfsi3oA02', '_blank'); } }
        const _supabase = supabase.createClient('https://wtyftavgeedogadlqpzr.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind0eWZ0YXZnZWVkb2dhZGxxcHpyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgxNTc2OTIsImV4cCI6MjA1MzczMzY5Mn0.qW7q-vL-YV0xU7r-XW8X-Z1X-YV0xU7r-XW8X-Z1X-YV0xU7r-XW8X-Z1X-Y');
        async function login() { await _supabase.auth.signInWithOAuth({ provider: 'google', options: { redirectTo: window.location.origin + window.location.pathname } }); }
        async function checkUser() {
            const { data: { user } } = await _supabase.auth.getUser();
            if (user) {
                document.querySelectorAll('.premium-blur').forEach(el => { el.style.filter = 'none'; el.style.opacity = '1'; });
                document.querySelectorAll('.unlock-btn').forEach(btn => { btn.innerText = 'Book Now'; btn.classList.replace('bg-blue-600', 'bg-green-600'); });
                document.getElementById('auth-btn').innerText = "HI, " + user.user_metadata.full_name.split(' ')[0].toUpperCase();
            }
        }
        checkUser();
    </script>
</body>
</html>
